<div class="badge-modal-wrapper" id="speech-to-text-modal">
  <div class="overlay close-speech-to-text-modal">

    <div class="close-btn">
      <i class="fal fa-times"></i>
    </div>

  </div>
  <div class="modal-booqs" id="speech-to-text-<%= @token %>">

    <h3 class="green my-3 font-weight-bold" id="modal-title"><%= t('subtitles.transcribe_videos_on_youtube') %></h3>

    <!--
    <p class="text-secondary text-left">文字起こしには、10分（600秒）まで100円、その後は10分ごとに100円の追加料金がかかります。</p>
    -->


    <div id="contents-form">


    <%= form_with url: speech_to_text_subtitles_path, method: :post do |f| %>
      <%= f.hidden_field :url, value: @url %>
      <%= f.hidden_field :token, value: @token %>
      <div id="scraping-error-massages"></div>
      <h5 class="text-secondary font-weight-normal"><%= @title %></h5>
      <div class="d-block mt-2 mb-4">
        <%= image_tag @image, class: 'img-fluid w-25 mb-2' %>
      </div>

      <h4 class="my-3 font-weight-bold"><%= t 'subtitles.setting_to_transcribe' %></h4>

      <%= f.select :bcp47, @bcp47.map { |code| [t("lang.#{code}"), code] },
                   {},
                   { class: 'form-control form-control my-3' } %>

      <!--
      <div class="card">
        <div class="card-body">
          <p class="text-secondary">動画の秒数：<#%= @article.video_duration %></p>
          <p class="text-secondary mb-1">料金：<b>無料！</b></p>
        </div>
      </div>
      -->


      <%= f.submit t('subtitles.setting_to_transcribe'), class: 'btn btn-lg btn-info mt-5 w-100 font-weight-bold' %>

    <% end %>

    </div>

    <!--
    <#% local = current_user&.customer.blank? %>
    <#%= form_with model: @article, url: speech_to_text_article_path(@article), method: :post, local: local do |f| %>
      <#%= hidden_field_tag :sub, request.referer[/sub=(.+)/, 1] %>
      <#%= f.select :bcp47, @bcp47.map { |code| [t("lang.#{code}"), code] },
                   {},
                   { class: 'form-control form-control my-3' } %>

      <div class="card">
        <div class="card-body">
          <p class="text-secondary">動画の秒数：<#%= @article.video_duration %></p>
          <p class="text-secondary mb-1">料金：<#%= @amount %>円</p>
        </div>
      </div>

      <#% if current_user.customer.present? %>

        <#%= f.submit "文字起こしをする", class: 'btn btn-solid w-100 mt-5 loading-show-btn' %>
        <div class="loading is-hide">
          <div class="loading_icon"></div>
        </div>

      <#% else %>
        <div class="stripe">
          <script
            src="https://checkout.stripe.com/checkout.js"
            class="stripe-button"
            data-key="<#%= Rails&.configuration&.stripe[:publishable_key] %>"
            data-currency="JPY"
            data-locale="ja"
            data-amount="<#%= @amount %>"
            data-name="文字起こし"
            data-description="<#%= @amount %>円"
            data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
            data-label="文字起こし"
            data-panelLabel="支払う"
            data-email="<#%= current_user&.email %>"
            data-allow-remember-me="false"
          >
          </script>
          <button class="btn btn-solid my-3 w-100"><#%= "#{@amount}円で文字起こしする" %></button>
        </div>
      <#% end %>

    <#% end %>
    -->


  </div>

</div>





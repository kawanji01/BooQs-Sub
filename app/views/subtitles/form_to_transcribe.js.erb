// loading画面を消す
document.querySelector('#loading').classList.add("is-hide");

<% if @valid %>

displaySpeechToTextModal();
function displaySpeechToTextModal() {
    const main = document.querySelector('#main');
    main.insertAdjacentHTML('beforeend', "<%= j(render 'subtitles/transcription_modal') %>");
    const speechToTextModalWrapper = document.querySelector('#transcription-modal');
    const closeBtns = document.querySelectorAll('.close-transcription-modal')
    closeBtns.forEach(function(item) {
        item.addEventListener('click', function() {
            speechToTextModalWrapper.remove();
        });
    });
}
// ローディング
var loadingShowBtns = document.querySelectorAll('.loading-show-btn');
loadingShowBtns.forEach(function (item) {
    item.addEventListener('click', function() {
        item.nextElementSibling.classList.remove('is-hide');
    });
});

<% else %>

displayErrorMessage();
function displayErrorMessage() {
    const invalidFeedback = document.querySelector('#invalid-feedback');
    invalidFeedback.textContent = "<%= @error_message %>";
    invalidFeedback.style.display = 'block';
}

<% end %>


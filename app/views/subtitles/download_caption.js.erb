<% if @error.present? %>

downloadError();
function downloadError() {
    const captionModalWrapper = document.querySelector('#captions-modal');
    captionModalWrapper.remove();
    const invalidFeedback = document.querySelector('#invalid-feedback');
    invalidFeedback.textContent = "<%= @error %>";
    invalidFeedback.style.display = 'block';
}

<% else %>
downloadCaption();
function downloadCaption() {
    const captionModal = document.querySelector('#captions-<%= @token %>');
    const title = "<%= t 'subtitles.downloading_now' %>"
    captionModal.querySelector('#contents-form').innerHTML = `
<h3 class="my-4 font-weight-bold" id="modal-title">${title}</h3>
<div class="progress" id="download-progress-bar">
  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
</div>`;
}

<% end %>
